# ğŸ“Œ æ³¨è§£è¯­æ³•

JDK1.5 å¼•å…¥çš„å…ƒæ•°æ®æœºåˆ¶ã€‚ä½œä¸ºä¸€ç§æ ‡è®°å’ŒæŒ‡ä»¤ï¼Œä¸æ”¹å˜ä»£ç çš„é€»è¾‘æ‰§è¡Œæµï¼Œè€Œæ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ã€JVM æˆ–è¿è¡Œæ—¶æ¡†æ¶ï¼š"è¯·æŒ‰ç…§æŸç§ç‰¹å®šæ–¹å¼å¤„ç†è¿™æ®µä»£ç "ã€‚

æ¼”å˜ï¼šXML é…ç½®åœ°ç‹±å‚¬ç”Ÿéœ€æ±‚ â†’ æ³¨è§£

æ³¨è§£åªæ˜¯æ ‡è®°ï¼Œå¿…é¡»é…åˆå¤„ç†å™¨æ‰èƒ½ç”Ÿæ•ˆã€‚

---

## ğŸ“„ è¯­æ³•åŸºç¡€

### ğŸ”– åŸºæœ¬å®šä¹‰

```java
public @interface MyAnnotation {
    String value() default "";
    int count() default 1;
    Class<?> type();
}
```

**æ³¨è§£æœ¬è´¨**

`@interface` æœ¬è´¨æ˜¯ `interface` çš„è¯­æ³•ç³–ï¼Œç¼–è¯‘åè‡ªåŠ¨ç»§æ‰¿ `java.lang.annotation.Annotation`ï¼š

```java
// ç¼–è¯‘åæ•ˆæœ
public interface MyAnnotation extends java.lang.annotation.Annotation {
    String value();
    int count();
    Class<?> type();
}
```

**å…ƒç´ è§„åˆ™**

- ä»…æ”¯æŒ `String`ã€åŸºæœ¬ç±»å‹ã€`Class`ã€æšä¸¾ã€æ³¨è§£ã€ä»¥åŠè¿™äº›ç±»å‹çš„æ•°ç»„
- æ•°ç»„ä½¿ç”¨å•å…ƒç´ æ—¶å¯çœç•¥å¤§æ‹¬å·ï¼š`@Roles("admin")`
- å…ƒç´ æœ‰ `default` æ—¶å¯çœç•¥ï¼š`@MyAnnotation(type = User.class)`

**è‡ªå®šä¹‰æ³¨è§£æ­¥éª¤**

1. ä½¿ç”¨ `@interface` å…³é”®å­—å®šä¹‰æ³¨è§£
2. æ·»åŠ å…ƒæ³¨è§£ï¼ˆå¯é€‰ä½†æ¨èï¼‰
3. å®šä¹‰æ³¨è§£å±æ€§ï¼ˆå…ƒç´ ï¼‰
4. è®¾ç½®é»˜è®¤å€¼ï¼ˆå¯é€‰ï¼‰

**å®Œæ•´ç¤ºä¾‹ï¼šè‡ªå®šä¹‰æ³¨è§£**

```java
// 1. å®šä¹‰æ³¨è§£ï¼ˆåŒ…å«å…ƒæ³¨è§£ï¼‰
@Target({ElementType.TYPE, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface ApiEndpoint {
    
    // String ç±»å‹å±æ€§
    String url() default "";
    
    // åŸºæœ¬ç±»å‹å±æ€§
    int timeout() default 5000;
    boolean required() default true;
    
    // Class ç±»å‹å±æ€§
    Class<?> responseType() default Void.class;
    
    // æšä¸¾ç±»å‹å±æ€§
    HttpMethod method() default HttpMethod.GET;
    
    // æ³¨è§£ç±»å‹å±æ€§
    @Repeatable
    Header[] headers() default {};
    
    // æšä¸¾å®šä¹‰
    enum HttpMethod {
        GET, POST, PUT, DELETE
    }
    
    // åµŒå¥—æ³¨è§£
    @interface Header {
        String name();
        String value();
    }
}

// 2. ä½¿ç”¨æ³¨è§£
@ApiEndpoint(
    url = "/api/users",
    method = HttpMethod.POST,
    timeout = 3000,
    responseType = User.class,
    headers = {
        @Header(name = "Content-Type", value = "application/json"),
        @Header(name = "Authorization", value = "Bearer token")
    }
)
public class UserController {
    
    @ApiEndpoint(url = "/api/users/{id}")
    public User getUser(String id) {
        return new User();
    }
}
```

**æ³¨è§£å±æ€§ç±»å‹è¯¦è§£**

```java
public @interface VariousTypes {
    
    // 1. åŸºæœ¬ç±»å‹
    boolean flag() default false;
    byte b() default 0;
    char c() default '\u0000';
    short s() default 0;
    int i() default 0;
    long l() default 0L;
    float f() default 0.0f;
    double d() default 0.0d;
    
    // 2. String ç±»å‹
    String name() default "";
    
    // 3. Class ç±»å‹
    Class<?> type() default Object.class;
    
    // 4. æšä¸¾ç±»å‹
    Level level() default Level.INFO;
    
    enum Level {
        DEBUG, INFO, WARN, ERROR
    }
    
    // 5. æ³¨è§£ç±»å‹ï¼ˆåµŒå¥—ï¼‰
    Author author() default @Author(name = "unknown");
    
    @interface Author {
        String name();
    }
    
    // 6. æ•°ç»„ç±»å‹ï¼ˆä»¥ä¸Šæ‰€æœ‰ç±»å‹çš„æ•°ç»„ï¼‰
    String[] tags() default {};
    int[] codes() default {200, 404};
    Class<?>[] types() default {};
    Level[] levels() default {Level.INFO};
}
```

**å±æ€§å‘½åçº¦å®š**

```java
public @interface NamingConvention {
    
    // æ¨èä½¿ç”¨æè¿°æ€§åç§°
    String name() default "";           // âœ… æ¸…æ™°
    String url() default "";            // âœ… æ¸…æ™°
    
    // é¿å… camelCase è¿‡åº¦ç¼©å†™
    // String n() default "";           // âŒ ä¸æ¸…æ™°
    // String u() default "";           // âŒ ä¸æ¸…æ™°
    
    // ç‰¹æ®Šå±æ€§ï¼švalue
    // å½“åªæœ‰ä¸€ä¸ªå¸¸ç”¨å±æ€§æ—¶ï¼Œå‘½åä¸º value å¯çœç•¥å‚æ•°å
    String value() default "";          // âœ… ç‰¹æ®Šè§„åˆ™
}
```

**é»˜è®¤å€¼è®¾è®¡ç­–ç•¥**

```java
public @interface DefaultStrategy {
    
    // ç­–ç•¥1ï¼šç©ºå€¼é»˜è®¤
    String description() default "";           // ç©ºå­—ç¬¦ä¸²
    String[] tags() default {};                // ç©ºæ•°ç»„
    
    // ç­–ç•¥2ï¼šåˆç†ç¼ºçœå€¼
    int timeout() default 5000;                // 5ç§’è¶…æ—¶
    int maxRetry() default 3;                  // é‡è¯•3æ¬¡
    boolean enabled() default true;            // é»˜è®¤å¯ç”¨
    
    // ç­–ç•¥3ï¼šç±»å‹å®‰å…¨é»˜è®¤
    Class<?> type() default Void.class;        // Void ä½œä¸ºå ä½
    Level level() default Level.INFO;           // æšä¸¾é»˜è®¤å€¼
    
    // ç­–ç•¥4ï¼šæ— é»˜è®¤å€¼çš„å¿…éœ€å±æ€§
    String id();                                // å¿…é¡»æä¾›ï¼Œæ— é»˜è®¤å€¼
}
```

**æ³¨è§£ä½¿ç”¨ç¤ºä¾‹**

```java
// æœ€ç®€å†™æ³•ï¼ˆä»…ä½¿ç”¨é»˜è®¤å€¼ï¼‰
@SimpleAnnotation
public class MyService {}

// å•ä¸ªå±æ€§ï¼ˆçœç•¥ value= è¯­æ³•ï¼‰
@ValueOnly("singleton")
public class SingleService {}

// å¤šä¸ªå±æ€§ï¼ˆéœ€æŒ‡å®šå‚æ•°åï¼‰
@MultipleValues(
    url = "/api/data",
    timeout = 3000,
    enabled = false
)
public class DataService {}

// æ•°ç»„å±æ€§ï¼ˆå•å…ƒç´ å¯çœç•¥å¤§æ‹¬å·ï¼‰
@Tags({"java", "spring", "annotation"})
@SingleTag("annotation")  // ç­‰ä»·äº @SingleTag({"annotation"})
public class TaggedService {}

// åµŒå¥—æ³¨è§£
@Meta(value = "@Meta æ³¨è§£ç¤ºä¾‹", tags = {"nested", "example"})
@Nested(name = "åµŒå¥—æ³¨è§£")
public class NestedService {}

// ç»„åˆæ³¨è§£ï¼ˆå¤šä¸ªæ³¨è§£å åŠ ï¼‰
@Component
@Scope("singleton")
@Service("myService")
public class CombinedService {}
```

**è‡ªå®šä¹‰æ³¨è§£æœ€ä½³å®è·µ**

```java
/**
 * API ç«¯ç‚¹æ³¨è§£
 * 
 * ä½¿ç”¨åœºæ™¯ï¼šæ ‡æ³¨ REST API æ¥å£
 * ç”Ÿå‘½å‘¨æœŸï¼šè¿è¡Œæ—¶ï¼Œé€šè¿‡åå°„è¯»å–
 * ç›®æ ‡ï¼šç±»å‹å’Œæ–¹æ³•
 */
@Target({ElementType.TYPE, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface ApiEndpoint {
    
    /**
     * API ç«¯ç‚¹ URL è·¯å¾„
     */
    String value() default "";
    
    /**
     * HTTP è¯·æ±‚æ–¹æ³•
     */
    HttpMethod method() default HttpMethod.GET;
    
    /**
     * è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
     */
    int timeout() default 5000;
    
    /**
     * æ˜¯å¦éœ€è¦è®¤è¯
     */
    boolean authenticate() default false;
    
    /**
     * HTTP æ–¹æ³•æšä¸¾
     */
    enum HttpMethod {
        GET, POST, PUT, DELETE, PATCH
    }
}
```

**æ³¨è§£å¤„ç†å™¨ç¤ºä¾‹ï¼ˆè¿è¡Œæ—¶ï¼‰**

```java
// å¤„ç†å™¨ç¤ºä¾‹ï¼šæ‰«ææ‰€æœ‰å¸¦ @ApiEndpoint çš„ç±»å’Œæ–¹æ³•
public class ApiEndpointScanner {
    
    public void scan(String packageName) throws Exception {
        Reflections reflections = new Reflections(packageName);
        
        // è·å–æ‰€æœ‰å¸¦ @ApiEndpoint çš„ç±»
        Set<Class<?>> classes = reflections.getTypesAnnotatedWith(ApiEndpoint.class);
        
        for (Class<?> clazz : classes) {
            ApiEndpoint classAnnotation = clazz.getAnnotation(ApiEndpoint.class);
            System.out.println("ç±»: " + clazz.getSimpleName());
            System.out.println("  URL: " + classAnnotation.value());
            
            // è·å–æ–¹æ³•ä¸Šçš„æ³¨è§£
            for (Method method : clazz.getDeclaredMethods()) {
                if (method.isAnnotationPresent(ApiEndpoint.class)) {
                    ApiEndpoint methodAnnotation = method.getAnnotation(ApiEndpoint.class);
                    System.out.println("  æ–¹æ³•: " + method.getName());
                    System.out.println("    URL: " + methodAnnotation.value());
                    System.out.println("    Method: " + methodAnnotation.method());
                }
            }
        }
    }
}
```

### ğŸ”– å…ƒæ³¨è§£

**@Target** - æŒ‡å®šé€‚ç”¨èŒƒå›´

```java
@Target(ElementType.TYPE)            // ç±»ã€æ¥å£ã€æšä¸¾
@Target(ElementType.FIELD)           // å­—æ®µï¼ˆåŒ…æ‹¬æšä¸¾å¸¸é‡ï¼‰
@Target(ElementType.METHOD)          // æ–¹æ³•
@Target(ElementType.PARAMETER)       // æ–¹æ³•å‚æ•°
@Target(ElementType.CONSTRUCTOR)     // æ„é€ å™¨
```

å¤šèŒƒå›´ç»„åˆï¼š

```java
@Target({ElementType.TYPE, ElementType.METHOD})
public @interface Component {}
```

**@Retention** - æŒ‡å®šç”Ÿå‘½å‘¨æœŸ

```java
@Retention(RetentionPolicy.SOURCE)    // æºç çº§ï¼Œç¼–è¯‘åä¸¢å¼ƒ
@Retention(RetentionPolicy.CLASS)     // å­—èŠ‚ç çº§ï¼Œè¿è¡Œæ—¶ä¸å¯è§ï¼ˆé»˜è®¤ï¼‰
@Retention(RetentionPolicy.RUNTIME)  // è¿è¡Œæ—¶çº§ï¼Œåå°„å¯è¯»
```

ç”Ÿå‘½å‘¨æœŸé€‰æ‹©ç­–ç•¥ï¼š
- æºç çº§ï¼šç¼–è¯‘å™¨æ£€æŸ¥ï¼ˆ`@Override`ã€`@SuppressWarnings`ï¼‰
- è¿è¡Œæ—¶çº§ï¼šæ¡†æ¶é€šè¿‡åå°„è¯»å–ï¼ˆ`@Component`ã€`@RequestMapping`ï¼‰

**@Inherited** - å­ç±»ç»§æ‰¿ï¼ˆä»…å¯¹ç±»æœ‰æ•ˆï¼‰

```java
@Inherited
@Retention(RetentionPolicy.RUNTIME)
public @interface Author {
    String name();
}

@Author("å¼ ä¸‰")
class Parent {}

class Child extends Parent {}
// Child å¯é€šè¿‡åå°„è¯»å–åˆ° @Authorï¼Œä½†ä¸ä¼šç»§æ‰¿çˆ¶ç±»æ–¹æ³•ã€å­—æ®µçš„æ³¨è§£
```

ç»§æ‰¿é™åˆ¶ï¼š
- ä»…å¯¹ç±»æ³¨è§£ç”Ÿæ•ˆï¼Œæ¥å£çš„æ³¨è§£ä¸ä¼šè¢«å®ç°ç±»ç»§æ‰¿
- åŸå­æ€§ï¼šè¦ä¹ˆå…¨éƒ¨ç»§æ‰¿ï¼Œè¦ä¹ˆéƒ½ä¸ç»§æ‰¿

**@Repeatable** - å¯é‡å¤ä½¿ç”¨ï¼ˆJava 8+ï¼‰

```java
@Retention(RetentionPolicy.RUNTIME)
public @interface Roles {
    Role[] value();  // å®¹å™¨æ³¨è§£å¿…é¡»åŒ…å«åä¸º value çš„æ•°ç»„å…ƒç´ 
}

@Repeatable(Roles.class)
public @interface Role {
    String name();
}

// ä½¿ç”¨æ–¹å¼
@Role(name = "admin")
@Role(name = "user")
class UserController {}

// ç­‰ä»·äºï¼ˆç¼–è¯‘å™¨è‡ªåŠ¨åŒ…è£…ï¼‰
@Roles({@Role(name = "admin"), @Role(name = "user")})
class UserController {}
```

**@Documented** - åŒ…å«åœ¨ Javadoc

æ ‡æ³¨ `@Documented` çš„æ³¨è§£ä¼šå‡ºç°åœ¨ JavaDoc çš„ API æ–‡æ¡£ä¸­ï¼š

```java
@Documented
@Retention(RetentionPolicy.RUNTIME)
public @interface API {
    String desc();
}
```

**@Override** - æ–¹æ³•é‡å†™æ£€æŸ¥

```java
class Parent {
    public void hello() {}
}

class Child extends Parent {
    @Override
    public void hello(String name) {}  // ç¼–è¯‘é”™è¯¯ï¼šæœªæ‰¾åˆ°å¯é‡å†™çš„æ–¹æ³•
}
```

æ£€æŸ¥æ¡ä»¶ï¼š
- æ–¹æ³•å¿…é¡»å­˜åœ¨äºçˆ¶ç±»æˆ–æ¥å£ä¸­
- ç­¾åä¸å®Œå…¨åŒ¹é…æ—¶ç¼–è¯‘å¤±è´¥
- é˜²æ­¢æ‹¼å†™é”™è¯¯å¯¼è‡´é‡è½½è€Œéé‡å†™

**@Deprecated** - æ ‡è®°å·²è¿‡æ—¶

```java
/**
 * @deprecated å·²è¢« {@link #newMethod()} æ›¿ä»£
 */
@Deprecated
public void oldMethod() {}
```

æ•ˆæœï¼š
- IDE æ˜¾ç¤ºåˆ é™¤çº¿
- ç¼–è¯‘è­¦å‘Šï¼ˆå¯æŠ‘åˆ¶ï¼‰
- è°ƒç”¨è€…åœ¨ JavaDoc ä¸­çœ‹åˆ°æ›¿ä»£è¯´æ˜

**@SuppressWarnings** - æŠ‘åˆ¶ç¼–è¯‘è­¦å‘Š

```java
@SuppressWarnings("unchecked")        // æŠ‘åˆ¶æœªæ£€æŸ¥ç±»å‹è½¬æ¢
@SuppressWarnings({"unused", "deprecation"})  // æŠ‘åˆ¶å¤šç§è­¦å‘Š
```

### ğŸ”– @Value ç‰¹æ€§

å•ä¸€åä¸º `value` çš„å…ƒç´ å¯çœç•¥å‚æ•°åï¼š

```java
@Path("/api/users")                    // ç­‰ä»·äº @Path(value = "/api/users")
@Named("userService")                  // ç­‰ä»·äº @Named(value = "userService")
@RequestMapping(value = "/users")      // è¿˜å¯ä»¥ç®€å†™ä¸º @RequestMapping("/users")
```

**æ··åˆä½¿ç”¨**

```java
// value å¯çœç•¥ï¼Œå…¶ä»–å…ƒç´ å¿…é¡»æ˜¾å¼æŒ‡å®š
@GET
@Path("/users")
@Produces("application/json")
public Response getUsers() {}
```

---

## ğŸ“„ æ³¨è§£å¤„ç†

### ğŸ”– è¿è¡Œæ—¶åå°„å¤„ç†ï¼ˆRUNTIMEï¼‰

```java
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface Table {
    String name();
}

@Table(name = "users")
class User {}

// åå°„è¯»å–
Class<?> clazz = User.class;
if (clazz.isAnnotationPresent(Table.class)) {
    Table table = clazz.getAnnotation(Table.class);
    String tableName = table.name();  // "users"
}
```

**åå°„ç›¸å…³æ–¹æ³•**

```java
Class<User> clazz = User.class;

// æŒ‰ç±»å‹è·å–
Table table = clazz.getAnnotation(Table.class);                 // å•ä¸ªæˆ– null
Annotation[] annotations = clazz.getAnnotations();             // æ‰€æœ‰ç›´æ¥æ³¨è§£
Annotation[] declaredAnnotations = clazz.getDeclaredAnnotations(); // æ‰€æœ‰ç›´æ¥æ³¨è§£ï¼ˆä¸å«ç»§æ‰¿ï¼‰

// è·å–æŒ‡å®šç±»å‹ï¼ˆåŒ…æ‹¬ @Inherited çš„çˆ¶ç±»æ³¨è§£ï¼‰
Table[] tables = clazz.getAnnotationsByType(Table.class);

// æ£€æŸ¥æ˜¯å¦å­˜åœ¨
boolean hasTable = clazz.isAnnotationPresent(Table.class);

// å­—æ®µã€æ–¹æ³•ã€å‚æ•°çš„ç±»ä¼¼æ“ä½œ
Field field = clazz.getDeclaredField("name");
Method method = clazz.getDeclaredMethod("getName");
Parameter parameter = method.getParameters()[0];
```

---

## ğŸ“„ æ³¨è§£è®¾è®¡è§„èŒƒ

### ğŸ”– å‘½åè§„èŒƒ

```java
// åŠ¨è¯ç±»ï¼šæè¿°è¡Œä¸ºæˆ–æ§åˆ¶
@Override
@SuppressWarnings

// åè¯ç±»ï¼šæè¿°å…ƒæ•°æ®å±æ€§
@Component
@Entity
@Table

// æ¨èé£æ ¼
public @interface RequestMapping {}  // å¤§é©¼å³°
public @interface TableName {}      // æ˜ç¡®çš„è¯­ä¹‰
```

### ğŸ”– ç”Ÿå‘½å‘¨æœŸé€‰æ‹©

| ä½¿ç”¨åœºæ™¯ | RetentionPolicy | ç¤ºä¾‹ |
|---------|----------------|------|
| ç¼–è¯‘å™¨æ£€æŸ¥ | SOURCE | @Override, @SuppressWarnings |
| è¿è¡Œæ—¶æ¡†æ¶ | RUNTIME | @Component, @RequestMapping |

### ğŸ”– é»˜è®¤å€¼è®¾è®¡åŸåˆ™

```java
public @interface Config {
    String value() default "";                              // å¸¸ç”¨é»˜è®¤å€¼
    boolean enabled() default true;                         // æ˜¾å¼çœŸå€¼
    int timeout() default 5000;                             // åˆç†ç¼ºçœå€¼
    Class<?> type() default Object.class;                   // ç±»å‹å…œåº•
    String[] tags() default {};                             // ç©ºé›†åˆ
}

// é¿å…æ— é»˜è®¤å€¼çš„å¿…éœ€å…ƒç´ ï¼Œé™¤éçœŸçš„å¿…éœ€
public @interface Id {
    String value();  // æ²¡æœ‰é»˜è®¤ï¼Œå› ä¸ºå¿…é¡»æä¾›
}
```

### ğŸ”– ç»„åˆæ³¨è§£è®¾è®¡

```java
// åŸå§‹æ³¨è§£
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface Component {
    String value() default "";
}

@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface RequestMapping {
    String path() default "";
    String method() default "GET";
}

// ç»„åˆæ³¨è§£ï¼ˆSpring é£æ ¼ï¼‰
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Component  // åŒ…å«åŸå§‹æ³¨è§£
@RequestMapping(path = "/api", method = "GET")
public @interface GetMapping {
    @AliasFor(annotation = RequestMapping.class, attribute = "path")
    String value() default "";
}

// ä½¿ç”¨
@GetMapping("/users")  // ä¸€è¡Œç»„åˆäº† @Component å’Œå¤šä¸ª @RequestMapping å±æ€§
class UserController {}
```

### ğŸ”– æ³¨è§£å¯ç©ºæ€§è®¾è®¡

```java
public @interface Info {
    String name() default "";

    String description() default "";        // ç©ºå­—ç¬¦ä¸²è¡¨ç¤ºå¯é€‰

    String optionalField();                 // æ— é»˜è®¤å€¼ = å¯èƒ½ä¸º null
}

// å¤„ç†æ³¨è§£æ—¶éœ€è¦é˜²å¾¡æ€§ç¼–ç¨‹
Info info = clazz.getAnnotation(Info.class);
if (info != null) {
    String desc = info.description().isEmpty() ? null : info.description();
    String opt = info.optionalField();  // å¯èƒ½ä¸º null
}
```

### ğŸ”– æ³¨è§£ç±»å‹å®‰å…¨

é¿å…ä½¿ç”¨ String ä½œä¸ºæšä¸¾ä¼ é€’ï¼š

```java
// âŒ ä¸æ¨èï¼šå­—ç¬¦ä¸²æ‹¼å†™é”™è¯¯åœ¨ç¼–è¯‘æœŸæ— æ³•æ£€æµ‹
public @interface Property {
    String type();  // "string", "number", "boolean"
}

@Property(type = "strign")  // ç¼–è¯‘é€šè¿‡ï¼Œè¿è¡Œæ—¶æ‰å‘ç°æ‹¼å†™é”™è¯¯
class Data {}

// âœ… æ¨èï¼šä½¿ç”¨æšä¸¾ä¿è¯ç±»å‹å®‰å…¨
public @interface Property {
    ValueType type() default ValueType.STRING;
}

public enum ValueType {
    STRING, NUMBER, BOOLEAN
}

@Property(type = ValueType.NUMBER)
class Data {}  // ç¼–è¯‘æœŸä¿è¯ç±»å‹æ­£ç¡®
```

---

## ğŸ“„ å¸¸è§é™·é˜±

### ğŸ”– æ³¨è§£ä¸å¯å˜

æ³¨è§£ä¸€æ—¦å®šä¹‰ï¼Œå®ä¾‹ä¸å¯ä¿®æ”¹ï¼ˆç±»ä¼¼å¸¸é‡æ¥å£ï¼‰ï¼š

```java
@Table(name = "users")
class User {}

// âŒ æ— æ³•è¿è¡Œæ—¶ä¿®æ”¹æ³¨è§£å±æ€§
Table table = User.class.getAnnotation(Table.class);
// table.setName("new_users");  // ç¼–è¯‘é”™è¯¯ï¼ŒAnnotation æ¥å£æ—  setter

// âœ… é€šè¿‡ä»£ç†åŠ¨æ€æ¨¡æ‹Ÿä¿®æ”¹ï¼ˆä¸æ¨èï¼Œç ´åå¯é¢„æµ‹æ€§ï¼‰
```

### ğŸ”– null å€¼å¤„ç†

æ³¨è§£å…ƒç´ ä¸èƒ½ä½¿ç”¨ null ä½œä¸ºé»˜è®¤å€¼æˆ–å®é™…å€¼ï¼š

```java
// âŒ ç¼–è¯‘é”™è¯¯
public @interface Config {
    String name() default null;
}

@Config(name = (String) null)  // è¿è¡Œæ—¶é”™è¯¯
class Data {}

// âœ… ä½¿ç”¨ç©ºå­—ç¬¦ä¸²æˆ–ç‰¹æ®Šæ ‡è®°
public @interface Config {
    String name() default "";
}
```

### ğŸ”– åå°„æ³¨è§£çš„ç»§æ‰¿é™·é˜±

```java
@Inherited
class Parent {
    @Deprecated
    private void oldMethod() {}
}

class Child extends Parent {}

// âŒ è¯¯è§£ï¼šä»¥ä¸º @Inherited ä¼šç»§æ‰¿æ–¹æ³•æ³¨è§£
Method method = Child.class.getDeclaredMethod("oldMethod");
method.getAnnotation(Deprecated.class);  // âŒ null

// âœ… æ­£ç¡®ç†è§£ï¼š@Inherited ä»…ç»§æ‰¿ç±»çº§åˆ«çš„æ³¨è§£
Child.class.getAnnotation(Deprecated.class);  // âŒ nullï¼ˆçˆ¶ç±»æ²¡æœ‰ç±»çº§æ³¨è§£ï¼‰
```

### ğŸ”– CLASS Retention çš„åå°„é™·é˜±

```java
@Retention(RetentionPolicy.CLASS)
public @interface ByteCodeOnly {}

@ByteCodeOnly
class Data {}

// âŒ è¿è¡Œæ—¶æ— æ³•è¯»å–
Data.class.getAnnotation(ByteCodeOnly.class);  // null
```

### ğŸ”– æ³¨è§£ç»§æ‰¿è§„åˆ™

- ä»…å¯¹ç±»æ³¨è§£ç”Ÿæ•ˆï¼Œæ¥å£çš„æ³¨è§£ä¸ä¼šè¢«å®ç°ç±»ç»§æ‰¿
- æ–¹æ³•ã€å­—æ®µã€å‚æ•°ç­‰æ³¨è§£ä¸ç»§æ‰¿
- å­ç±»æ²¡æœ‰æ³¨è§£æ—¶æ‰ç»§æ‰¿ï¼ˆè‹¥å­ç±»è‡ªå·±å£°æ˜äº†åŒç±»æ³¨è§£ï¼Œä»¥å­ç±»çš„ä¸ºå‡†ï¼‰

---

## ğŸ“„ æœ€ä½³å®è·µ

### ğŸ”– é€‰æ‹©æ³¨è§£è€Œé XML

```xml
<!-- âŒ XML é…ç½®åœ°ç‹± -->
<bean id="userService" class="com.UserService">
    <property name="userDao" ref="userDao"/>
</bean>
```

```java
// âœ… æ³¨è§£é…ç½®ï¼ˆSpring é£æ ¼ï¼‰
@Component
public class UserService {
    @Autowired
    private UserDao userDao;
}
```

é€‰æ‹©åŸåˆ™ï¼š
- å›ºå®šä¸å˜çš„å…¨å±€é…ç½® â†’ XML
- ä»£ç ç»‘å®šçš„å…ƒæ•°æ® â†’ æ³¨è§£
- éœ€è¦è¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹ â†’ ç¼–ç¨‹å¼é…ç½®

### ğŸ”– æ³¨è§£ vs. æ¨¡æ¿æ–¹æ³•

```java
// âŒ è¿‡åº¦ä½¿ç”¨æ³¨è§£ï¼Œé€»è¾‘åˆ†æ•£
@Step1
@Step2
@Step3
public void process() {
}

// âœ… æ¨¡æ¿æ–¹æ³•ï¼Œé€»è¾‘æ¸…æ™°
public abstract class AbstractProcessor {
    public final void process() {
        doStep1();
        doStep2();
        doStep3();
    }
}
```

### ğŸ”– æ³¨è§£å±‚æ¬¡è®¾è®¡

```java
// æ ¸å¿ƒæ³¨è§£
@Target({ElementType.TYPE, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
public @interface Transactional {}

// æ‰©å±•æ³¨è§£ï¼ˆç»„åˆï¼‰
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Transactional
public @interface Service {}

// ä½¿ç”¨
@Service
public class UserService {}  // è¯­ä¹‰æ›´æ¸…æ™°
```

---

## ğŸ“„ å†å²è„‰ç»œ

### ğŸ”– JDK 1.5ï¼ˆ2004ï¼‰

å¼•å…¥æ³¨è§£æœºåˆ¶ï¼š
- å…ƒæ³¨è§£ï¼š`@Target`ã€`@Retention`ã€`@Inherited`ã€`@Documented`
- å†…ç½®æ³¨è§£ï¼š`@Override`ã€`@Deprecated`ã€`@SuppressWarnings`

èƒŒæ™¯ï¼šè§£å†³ J2EE æ—¶ä»£çš„ XML é…ç½®åœ°ç‹±ï¼ˆEJB 2.xï¼‰

### ğŸ”– JDK 6ï¼ˆ2006ï¼‰

`javax.annotation` åŒ…ï¼ˆJSR 250ï¼‰ï¼š
- `@Resource`ã€`@PostConstruct`ã€`@PreDestroy`

### ğŸ”– JDK 8ï¼ˆ2014ï¼‰

`@Repeatable`ï¼šå¯é‡å¤æ³¨è§£

### ğŸ”– ç”Ÿæ€å‘å±•

æ¡†æ¶æ³¨è§£åŒ–ï¼š
- Spring: `@Component`ã€`@Autowired`ã€`@RequestMapping`
- JPA: `@Entity`ã€`@Table`ã€`@Column`

---

## ğŸŒ³ ç”Ÿé•¿æ€è€ƒ

å¯¹å‘æ•£çš„è‡ªç”±æ•æ‰ã€ç²¾ç¡®åŒ–

---

## ğŸ’­ åå¤ç»Šè„š

è®°å½•å›é¡¾ã€ä½¿ç”¨æ–‡æ¡£æ—¶ï¼Œé‡åˆ°çš„å›°æƒ‘

---

## ğŸ› ï¸ å®è·µç»å†

è®°å½•å®è·µç»å†ï¼š demo + å·¥ä½œç»å† + ç¬¬ä¸‰æ–¹ä¼˜ç§€ç»éªŒåæ€

---

## ğŸ—ºï¸ ä¿®è®¢è®°å½•

---

## âš™ï¸ prompt

æ¢ç©¶è¯¥æ–‡æ¡£æ¨¡å—è¿‡ç¨‹ä¸­çš„ prompt è®°å½•
æ¨¡ç‰ˆå¦‚ä¸‹ï¼š
```markdown
# èƒŒæ™¯
æˆ‘æ˜¯ä¸€åè¿½æ±‚æ•ˆç‡çš„å­¦ä¹ è€…ã€‚æˆ‘ä»äº‹äºJavaåç«¯å¼€å‘å·¥ç¨‹å¸ˆçš„å·¥ä½œã€‚
æˆ‘è®¤ä¸ºå­¦ä¹ æœ¬è´¨ä¸Šå°±æ˜¯ å¤§é‡æ­£ç¡®ä¿¡æ¯çš„æ¶ˆåŒ– + å…³é”®ç»“è®ºçš„æ„Ÿå— + è‡ªç”±çš„å‘æ•£ã€‚
ä¾æ‰˜è¿™æ ·çš„æ€æƒ³ï¼Œæˆ‘å¸Œæœ›å’Œä½ æ¥è¿›è¡Œä¸€åœºtalkã€‚

æˆ‘ä»¬çš„ talk åŸºäºä»¥ä¸‹åŸåˆ™
1. ä½ æ˜¯ è¯¥talk ä¸»é¢˜ä¸‹çš„ä¸“å®¶
2. æˆ‘æ˜¯ä¸€ååœ¨å…¶ä»–é¢†åŸŸå…·æœ‰é€šç”¨æ€§æŠ€èƒ½çš„å·¥ç¨‹å¸ˆï¼Œå¦‚ Javaã€ä¼ ç»Ÿç®—æ³•ã€åç«¯å·¥ç¨‹ã€C++ è¯­æ³•ã€Go è¯­æ³•ç­‰ã€‚æ‹¥æœ‰ä¸€å®šè®¡ç®—æœºåŸºç¡€çš„çŸ¥è¯†ã€‚
3. æˆ‘ä»¬æ˜¯ä¸åŒé¢†åŸŸçš„æ“…é•¿è€…ï¼Œè¿™æ˜¯ä¸€åœºåœ†æ¡Œä¼šè®®å¼çš„talkã€‚å°±å’Œç´¢å°”ç»´ä¼šè®®ä¸€æ ·ï¼Œé˜¿å°”ä¼¯ç‰¹Â·çˆ±å› æ–¯å¦ä¸å°¼å°”æ–¯Â·ç»å°”ä¹‹é—´çš„äº¤æµã€‚
4. ä»¥ä½ çš„æƒé‡ä¸ºä¸»å‰æä¸‹ï¼Œæˆ‘å¸Œæœ›æˆ‘ä»¬ç›¸äº’çš„é—®è¯¢æ„Ÿå…´è¶£çš„å†…å®¹ã€‚è¿™æ ·å¯ä»¥æ¨åŠ¨ talk çš„è¿›åº¦ã€‚
# talk ä¸»é¢˜
Java æ³¨è§£è¯­æ³•ã€‚ä»¥åŠè®¾è®¡è§„èŒƒ

# æ€ç»´é“¾
1. æˆ‘å¯¹ä¿¡æ¯çš„è¦æ±‚æ˜¯ï¼Œä½ åº”è¯¥å‡å°‘å¹»è§‰ï¼Œå³ä¿¡æ¯æ˜¯è¶³å¤Ÿæ­£ç¡®çš„
2. æˆ‘æ€»æ˜¯å¯¹ä¸€ä»¶äº‹ç‰©çš„æ˜¯ä»€ä¹ˆã€ä»å“ªé‡Œæ¥æ„Ÿåˆ°å¥½å¥‡ã€‚æ‰€ä»¥ï¼Œä½ å¯ä»¥ç®€ç•¥è¯´æ˜å®ƒçš„å†å²é˜¶æ®µä»¥åŠå‘å±•å“²å­¦
3. æˆ‘ä¸€è¾¹å’Œä½  talkï¼Œä¸€è¾¹åšè‰ç¨¿ç¬”è®°ã€‚å› æ­¤ä½ çš„è¨€è¯­è¶³å¤Ÿå¼€é˜”ï¼Œå…·æœ‰é˜è¿°æ€§çš„åŒæ—¶ï¼Œä¹Ÿè¦è®©æˆ‘å®¹æ˜“ä»ä¸­è®°å½•å½’çº³æ€»ç»“ã€‚ä½†æ˜¯è¯·ä½ ä¸è¦ç›´æ¥ç»™æˆ‘æ€»ç»“ç¬”è®°ï¼Œå› ä¸ºæˆ‘å¸Œæœ›å¯ä»¥ä¸»åŠ¨æ¶ˆåŒ–ã€‚

# è¾“å…¥æ ¼å¼
æˆ‘å°†ä¼šè¾“å…¥ä¸€ä¸ªé—®é¢˜

# è¾“å‡ºæ ¼å¼
ä¸éœ€è¦ç‰¹æ®Šçš„æ¨¡ç‰ˆã€‚å‚ç…§æ€ç»´é“¾
# å½“å‰é—®é¢˜

# é—®é¢˜é˜¶æ®µ(è®°å½•äº† talk çš„è¿‡ç¨‹ï¼Œæ–¹ä¾¿å¤ç”¨)


--------
ä»¥ä¸‹å†…å®¹æ˜¯æˆ‘æ–¹ä¾¿å¤åˆ¶ç²˜è´´æ¨¡ç‰ˆï¼Œè¯·ä½ å¿½ç•¥
## é—®é¢˜Xï¼š
### é—®é¢˜æè¿°ï¼š

### å…³é”®ç»“è®ºï¼š
```



```markdown
# èƒŒæ™¯
ä½ æ˜¯ä¸€å å¤šå¹´ Java æ•™å­¦ç»éªŒçš„æ•™æˆã€‚
ä½ å‡ºç‰ˆè¿‡å¤šæœ¬ä¸“ä¸š Java ä¹¦ç±ã€‚ä»–ä»¬å’Œ Java æ ¸å¿ƒæŠ€æœ¯å¯†å·é½åã€‚
ä½ ç°åœ¨åœ¨æ•´ç† æ³¨è§£å†…å®¹çš„ç¬”è®°ã€‚

# ä»»åŠ¡
ç›®å‰å·²ç»ç¡®è®¤äº†è¯¥ç¬”è®°ç¨¿å­çš„åŸºæœ¬æ¡†æ¶ã€‚ä½ éœ€è¦åšçš„æ˜¯è¡¥å……å†…å®¹ã€‚
æ–¹ä¾¿åç»­æ•´ç†ï¼Œå‘æ•£ã€‚
ä¸è¦æ•´ç†ç”Ÿé•¿æ€è€ƒä¸»é¢˜ä»¥ä¸‹çš„å†…å®¹ï¼Œå®ƒå±äºåç»­çš„æ²‰æ·€å‘æ•£æ ç›®
```

