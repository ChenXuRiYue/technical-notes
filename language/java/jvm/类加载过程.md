# 类加载过程

![img](https://cdn.nlark.com/yuque/0/2024/png/5378072/1706422325589-7a4b6e5c-360f-4137-82c8-f43eacda5c4f.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_40%2Ctext_SmF2YSA4IEd1d2VuIFc%3D%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10)

## 加载

根据 类的全限定名来获取类的二进制字节流，并且将字节流对应的静态存储结构转换成方法区中的运行时数据结构。在这个过程中创建 一个 java.lang.Class 类对象



## 链接阶段

1. 验证， 校验类的正确性
2. 准备：为类变量分配内存并且设置类变量的默认初始值，在方法区中分配。（static 字段）
3. 解析，把类的符号引用转变为直接引用

## 初始化阶段

懒加载，执行类构造器\<clinit>() 方法。 （即执行静态代码块方法）



# 类加载器

1 .  启动类加载器： 加载 Java 的核心类库。由 C++ 实现

2 . 扩展类加载器：负责加载 `JRE/lib/ext` 目录下的类库，这些类库是 Java 核心类库的扩展。

3 . 应用程序类加载器： 加载用户类路径（classpath） 上的类库，及自己编写的类。

4 . 自定义类加载器：实现自定义加载器。

**双亲委派模型：**

1. 首先委托父类加载器进行加载。

避免重复加载，以及保证 Java核心类库的安全