# ğŸ“ å¯åŠ¨æŠ¥é”™

æ€»ç»“ Spring å¯åŠ¨æŠ¥é”™æ—¥å¿—ä»¥åŠè§£å†³æ–¹æ³•ã€‚é¡ºä¾¿æ€»ç»“ä¸€ä¸ªæ¯”è¾ƒé€šç”¨çš„ Spring è¯­å¢ƒä¸‹çš„æ—¥å¿—é˜…è¯»æ–¹æ³•æŠ€å·§

## ğŸ“Œ æ–¹æ³•æ€»ç»“

### ğŸ”– æ—¥å¿—ç»“æ„

åœ¨ç»Šè„šçŸ³å †ä¸­ï¼Œå¯¹æ¯ä¸ªæ—¥å¿—æ€»ç»“ã€‚

## ğŸ“Œ ç»Šè„šçŸ³å †

### ğŸ”– 01

```markdown
org.springframework.context.ApplicationContextException: **Unable to start web server**; nested exception is org.springframework.context.ApplicationContextException: Unable to start ServletWebServerApplicationContext due to missing ServletWebServerFactory bean.
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:163) ~[spring-boot-2.6.11.jar:2.6.11]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:577) ~[spring-context-5.3.22.jar:5.3.22]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.11.jar:2.6.11]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:745) [spring-boot-2.6.11.jar:2.6.11]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:420) [spring-boot-2.6.11.jar:2.6.11]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) [spring-boot-2.6.11.jar:2.6.11]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1317) [spring-boot-2.6.11.jar:2.6.11]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) [spring-boot-2.6.11.jar:2.6.11]
	at com.mi.car.iccc.aimusic.operation.IcccAiMusicOperationApplication.main(IcccAiMusicOperationApplication.java:25) [classes/:?]
Caused by: org.springframework.context.ApplicationContextException: Unable to start ServletWebServerApplicationContext due to missing ServletWebServerFactory bean.
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getWebServerFactory(ServletWebServerApplicationContext.java:210) ~[spring-boot-2.6.11.jar:2.6.11]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:180) ~[spring-boot-2.6.11.jar:2.6.11]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:160) ~[spring-boot-2.6.11.jar:2.6.11]
```

**ç»“æ„åˆ†æï¼š**

**1. ä¸»å¼‚å¸¸**

```txt
org.springframework.context.ApplicationContextException: 
Unable to start web server; 
nested exception is ... 
```

**2.åµŒå¥—å¼‚å¸¸**

```txt
nested exception is org.springframework.context.ApplicationContextException: Unable to start ServletWebServerApplicationContext due to missing ServletWebServerFactory bean.
```

**3.å †æ ˆè°ƒç”¨é“¾ï¼ˆå®šä½ä¸Šä¸‹æ–‡ï¼‰**

å› ä¸ºæ˜¯ä¸€ä¸ªæ ˆç»“æ„ï¼Œä»ä¸‹å¾€ä¸Šçœ‹ï¼Œæ‰¾åˆ°ä»£ç å…¥å£ï¼š

```txt
at com.mi.car.iccc.aimusic.operation.IcccAiMusicOperationApplication.main(IcccAiMusicOperationApplication.java:25)
```

${\large {\color[RGB]{250, 157, 30}ç»“è®º}} $

Application ä¸»ç±»æœªä½¿ç”¨ @SpringBootApplicationã€‚
@SpringBootApplication æ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼ŒåŒ…å«äº†ä»¥ä¸‹å…³é”®åŠŸèƒ½ï¼š

```java
@SpringBootConfiguration
@EnableAutoConfiguration  // â† è‡ªåŠ¨é…ç½®åµŒå…¥å¼ Web å®¹å™¨ï¼ˆå¦‚ Tomcatï¼‰
@ComponentScan
```

### ğŸ”– 02

```markdown
2025-12-10 11:45:58.277 ERROR 2705 - [main][traceId=] (o.s.b.SpringApplication.reportFailure.835) Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'meterRegistryPostProcessor' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/MetricsAutoConfiguration.class]: BeanPostProcessor before instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: Lorg/redisson/api/RedissonClient;
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:537) ~[spring-beans-5.3.22.jar:5.3.22]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.22.jar:5.3.22]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.22.jar:5.3.22]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.22.jar:5.3.22]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:213) ~[spring-beans-5.3.22.jar:5.3.22]
	at org.springframework.context.support.PostProcessorRegistrationDelegate.registerBeanPostProcessors(PostProcessorRegistrationDelegate.java:270) ~[spring-context-5.3.22.jar:5.3.22]
	at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:762) ~[spring-context-5.3.22.jar:5.3.22]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:567) ~[spring-context-5.3.22.jar:5.3.22]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.11.jar:2.6.11]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:745) [spring-boot-2.6.11.jar:2.6.11]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:420) [spring-boot-2.6.11.jar:2.6.11]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) [spring-boot-2.6.11.jar:2.6.11]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1317) [spring-boot-2.6.11.jar:2.6.11]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) [spring-boot-2.6.11.jar:2.6.11]
	at operation.operationApplication.main(OperationApplication.java:27) [classes/:?]
Caused by: java.lang.NoClassDefFoundError: Lorg/redisson/api/RedissonClient;
	at java.lang.Class.getDeclaredFields0(Native Method) ~[?:1.8.0_452]
	at java.lang.Class.privateGetDeclaredFields(Class.java:2611) ~[?:1.8.0_452]
	at java.lang.Class.getDeclaredFields(Class.java:1944) ~[?:1.8.0_452]
	at org.springframework.aop.aspectj.annotation.AbstractAspectJAdvisorFactory.compiledByAjc(AbstractAspectJAdvisorFactory.java:95) ~[spring-aop-5.3.22.jar:5.3.22]
	at org.springframework.aop.aspectj.annotation.AbstractAspectJAdvisorFactory.isAspect(AbstractAspectJAdvisorFactory.java:80) ~[spring-aop-5.3.22.jar:5.3.22]
	at org.springframework.aop.aspectj.annotation.BeanFactoryAspectJAdvisorsBuilder.buildAspectJAdvisors(BeanFactoryAspectJAdvisorsBuilder.java:104) ~[spring-aop-5.3.22.jar:5.3.22]
	at org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator.findCandidateAdvisors(AnnotationAwareAspectJAutoProxyCreator.java:95) ~[spring-aop-5.3.22.jar:5.3.22]
	at org.springframework.aop.aspectj.autoproxy.AspectJAwareAdvisorAutoProxyCreator.shouldSkip(AspectJAwareAdvisorAutoProxyCreator.java:101) ~[spring-aop-5.3.22.jar:5.3.22]
	at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessBeforeInstantiation(AbstractAutoProxyCreator.java:255) ~[spring-aop-5.3.22.jar:5.3.22]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:1160) ~[spring-beans-5.3.22.jar:5.3.22]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:1135) ~[spring-beans-5.3.22.jar:5.3.22]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:531) ~[spring-beans-5.3.22.jar:5.3.22]
	... 14 more
Caused by: java.lang.ClassNotFoundException: org.redisson.api.RedissonClient
	at java.net.URLClassLoader.findClass(URLClassLoader.java:387) ~[?:1.8.0_452]
	at java.lang.ClassLoader.loadClass(ClassLoader.java:418) ~[?:1.8.0_452]
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352) ~[?:1.8.0_452]
	at java.lang.ClassLoader.loadClass(ClassLoader.java:351) ~[?:1.8.0_452]
	at java.lang.Class.getDeclaredFields0(Native Method) ~[?:1.8.0_452]
	at java.lang.Class.privateGetDeclaredFields(Class.java:2611) ~[?:1.8.0_452]
	at java.lang.Class.getDeclaredFields(Class.java:1944) ~[?:1.8.0_452]
	at org.springframework.aop.aspectj.annotation.AbstractAspectJAdvisorFactory.compiledByAjc(AbstractAspectJAdvisorFactory.java:95) ~[spring-aop-5.3.22.jar:5.3.22]
	at org.springframework.aop.aspectj.annotation.AbstractAspectJAdvisorFactory.isAspect(AbstractAspectJAdvisorFactory.java:80) ~[spring-aop-5.3.22.jar:5.3.22]
	at org.springframework.aop.aspectj.annotation.BeanFactoryAspectJAdvisorsBuilder.buildAspectJAdvisors(BeanFactoryAspectJAdvisorsBuilder.java:104) ~[spring-aop-5.3.22.jar:5.3.22]
	at org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator.findCandidateAdvisors(AnnotationAwareAspectJAutoProxyCreator.java:95) ~[spring-aop-5.3.22.jar:5.3.22]
	at org.springframework.aop.aspectj.autoproxy.AspectJAwareAdvisorAutoProxyCreator.shouldSkip(AspectJAwareAdvisorAutoProxyCreator.java:101) ~[spring-aop-5.3.22.jar:5.3.22]
	at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessBeforeInstantiation(AbstractAutoProxyCreator.java:255) ~[spring-aop-5.3.22.jar:5.3.22]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:1160) ~[spring-beans-5.3.22.jar:5.3.22]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:1135) ~[spring-beans-5.3.22.jar:5.3.22]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:531) ~[spring-beans-5.3.22.jar:5.3.22]
	... 14 more
```



### ğŸ“Œ 03

```markdown
> 2025-12-18 15:59:34.122 ERROR 73727 - [main][traceId=] (o.s.b.SpringApplication.reportFailure.835)
   Application run failed

  org.springframework.beans.factory.BeanCreationException: **Error creating bean with name 
  'traceMapperAspect': Lookup method resolution failed;** nested exception is 
  java.lang.IllegalStateException: Failed to introspect Class 
  [com.mi.car.iccc.iccccommonutil.aop.aspect.TraceMapperAspect] from ClassLoader 
  [sun.misc.Launcher$AppClassLoader@18b4aac2]
  at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCand
  idateConstructors(AutowiredAnnotationBeanPostProcessor.java:289) ~[spring-beans-5.3.22.jar:5.3.22]
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstruct
  orsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1302) 
  ~[spring-beans-5.3.22.jar:5.3.22]
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance
  (AbstractAutowireCapableBeanFactory.java:1219) ~[spring-beans-5.3.22.jar:5.3.22]
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(Abstr
  actAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.22.jar:5.3.22]
  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(Abstrac
  tAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.22.jar:5.3.22]
  at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFa
  ctory.java:335) ~[spring-beans-5.3.22.jar:5.3.22]
  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSing
  letonBeanRegistry.java:234) ~[spring-beans-5.3.22.jar:5.3.22]
  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.jav
  a:333) ~[spring-beans-5.3.22.jar:5.3.22]
  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:
  208) ~[spring-beans-5.3.22.jar:5.3.22]
  at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(D
  efaultListableBeanFactory.java:955) ~[spring-beans-5.3.22.jar:5.3.22]
  at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(
  AbstractApplicationContext.java:918) ~[spring-context-5.3.22.jar:5.3.22]
  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationConte
  xt.java:583) ~[spring-context-5.3.22.jar:5.3.22]
  at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(Servlet
  WebServerApplicationContext.java:145) ~[spring-boot-2.6.11.jar:2.6.11]
  at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:745) 
  [spring-boot-2.6.11.jar:2.6.11]
  at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:420) 
  [spring-boot-2.6.11.jar:2.6.11]
  at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) 
  [spring-boot-2.6.11.jar:2.6.11]
  at org.springframework.boot.SpringApplication.run(SpringApplication.java:1317) 
  [spring-boot-2.6.11.jar:2.6.11]
  at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) 
  [spring-boot-2.6.11.jar:2.6.11]
  at com.mi.car.iccc.aimusic.operation.IcccAiMusicOperationApplication.main(IcccAiMusicOperationAppl
  ication.java:26) [classes/:?]
  Caused by: java.lang.IllegalStateException: Failed to introspect Class 
  [com.mi.car.iccc.iccccommonutil.aop.aspect.TraceMapperAspect] from ClassLoader 
  [sun.misc.Launcher$AppClassLoader@18b4aac2]
  at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:485) 
  ~[spring-core-5.3.22.jar:5.3.22]
  at org.springframework.util.ReflectionUtils.doWithLocalMethods(ReflectionUtils.java:321) 
  ~[spring-core-5.3.22.jar:5.3.22]
  at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCand
  idateConstructors(AutowiredAnnotationBeanPostProcessor.java:267) ~[spring-beans-5.3.22.jar:5.3.22]
  ... 18 more
  Caused by: java.lang.NoClassDefFoundError: org/aspectj/lang/ProceedingJoinPoint
  at java.lang.Class.getDeclaredMethods0(Native Method) ~[?:1.8.0_452]
  at java.lang.Class.privateGetDeclaredMethods(Class.java:2729) ~[?:1.8.0_452]
  at java.lang.Class.getDeclaredMethods(Class.java:2003) ~[?:1.8.0_452]
  at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:467) 
  ~[spring-core-5.3.22.jar:5.3.22]
  at org.springframework.util.ReflectionUtils.doWithLocalMethods(ReflectionUtils.java:321) 
  ~[spring-core-5.3.22.jar:5.3.22]
  at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCand
  idateConstructors(AutowiredAnnotationBeanPostProcessor.java:267) ~[spring-beans-5.3.22.jar:5.3.22]
  ... 18 more
  **Caused by**: java.lang.ClassNotFoundException: org.aspectj.lang.ProceedingJoinPoint
  at java.net.URLClassLoader.findClass(URLClassLoader.java:387) ~[?:1.8.0_452]
  at java.lang.ClassLoader.loadClass(ClassLoader.java:418) ~[?:1.8.0_452]
  at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352) ~[?:1.8.0_452]
  at java.lang.ClassLoader.loadClass(ClassLoader.java:351) ~[?:1.8.0_452]
  at java.lang.Class.getDeclaredMethods0(Native Method) ~[?:1.8.0_452]
  at java.lang.Class.privateGetDeclaredMethods(Class.java:2729) ~[?:1.8.0_452]
  at java.lang.Class.getDeclaredMethods(Class.java:2003) ~[?:1.8.0_452]
  at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:467) 
  ~[spring-core-5.3.22.jar:5.3.22]
  at org.springframework.util.ReflectionUtils.doWithLocalMethods(ReflectionUtils.java:321) 
  ~[spring-core-5.3.22.jar:5.3.22]
  at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCand
  idateConstructors(AutowiredAnnotationBeanPostProcessor.java:267) ~[spring-beans-5.3.22.jar:5.3.22]
  ... 18 more
```

**æ’æŸ¥æ­¥éª¤**

1. æ— è§†è¡¨è±¡ï¼š**Error creating bean with name  'traceMapperAspect'**ï¼ˆæ— æ³•æˆåŠŸåˆ›å»ºä¸€ä¸ªçœ‹ä¸Šå»åƒåˆ‡é¢çš„ beanï¼‰

2. å¯»æ‰¾æœ€åº•å±‚çš„ â€œCaused byâ€

   - å€’æ•°ç¬¬ä¸€è¡Œï¼šCaused by: java.lang.ClassNotFoundException: org.aspectj.lang.ProceedingJoinPoint

   - å€’æ•°ç¬¬äºŒè¡Œï¼šCaused by: java.lang.NoClassDefFoundError: org/aspectj/lang/ProceedingJoinPoint

3. åˆ†æå…ƒå‡¶

   ç¼ºä»€ä¹ˆç±»ï¼Ÿ org.aspectj.lang.ProceedingJoinPointã€‚

   å®ƒæ˜¯ @Around ç¯ç»•é€šçŸ¥é‡Œå¿…ç”¨çš„å‚æ•°ï¼Œç”¨æ¥æ‰§è¡Œç›®æ ‡æ–¹æ³•ã€‚

   **è°åœ¨ç”¨å®ƒï¼Ÿ** å¾€ä¸Šçœ‹å †æ ˆï¼ŒæŠ¥é”™çš„ Bean æ˜¯

      com.mi.car.iccc.iccccommonutil.aop.aspect.TraceMapperAspectã€‚

4. ç»“è®ºï¼šé¡¹ç›®ä¸­æœ‰ä¸€ä¸ªåˆ‡é¢ç±» TraceMapperAspectï¼Œå®ƒä¾èµ–äº† AspectJ çš„åº“ï¼Œä½†æ˜¯ä½ çš„é¡¹ç›®é‡Œæ²¡æœ‰å¼•å…¥ AspectJ çš„ Jar åŒ…ã€‚

## ğŸ“ prompt

```markdown
# èƒŒæ™¯
Java Spring åç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œæˆ‘åœ¨æ­å»ºä¸€ä¸ªæ–°çš„ Spring é¡¹ç›®å‘¢ã€‚æœŸé—´é‡åˆ°äº†å„ç§å„æ ·çš„å¯åŠ¨æŠ¥é”™ã€‚æˆ‘å¸Œæœ›å¯¹å®ƒä»¬åšä¸€ä¸ªæ€»ç»“ï¼Œå¹¶ä¸”å½¢æˆä¸€ä¸ªè§‚å¯Ÿæ—¥å¿—æŠ¥é”™æ’æŸ¥çš„è®¡åˆ’åŠä¹ æƒ¯ã€‚
```
