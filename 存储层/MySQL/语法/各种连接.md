### **一、连接查询概述**

连接查询用于结合多个表的数据，通过表之间的关联字段（通常是主键与外键）进行匹配。**核心作用**：从多个表中获取相关数据，避免数据冗余，提升查询灵活性。

### **二、内连接（INNER JOIN）**

#### **1. 概念**

- 仅返回两个表中**满足连接条件**的行（交集部分）。

- 是最常用的连接方式，等价于省略 INNER 的 JOIN。

#### **2. 语法**

```
SELECT 列名
FROM 表1 [INNER] JOIN 表2 
ON 表1.关联字段 = 表2.关联字段;
```

#### **3. 示例**

**表结构**：

- students（学生表）：id, name

- scores（成绩表）：student_id, score

**查询**：获取有成绩的学生及其分数。

```
SELECT s.name, sc.score
FROM students s
JOIN scores sc 
ON s.id = sc.student_id;
```

### **三、外连接（OUTER JOIN）**

外连接包括左外连接和右外连接，用于保留某一侧表的全部行，即使另一侧无匹配数据。

### **四、左外连接（LEFT JOIN / LEFT OUTER JOIN）**

#### **1. 概念**

- 返回左表的**所有行**，右表中匹配的行返回数据，不匹配的行用 NULL 填充。

#### **2. 语法**

```
SELECT 列名
FROM 表1 LEFT [OUTER] JOIN 表2 
ON 表1.关联字段 = 表2.关联字段;
```

#### **3. 示例**

**查询**：获取所有学生的信息及其成绩（无成绩的学生成绩为 NULL）。

```
SELECT s.name, sc.score
FROM students s
LEFT JOIN scores sc 
ON s.id = sc.student_id;
```

#### **4. 图解**

（左表全部行 + 右表匹配行，右表不匹配行填 NULL）

### **五、右外连接（RIGHT JOIN / RIGHT OUTER JOIN）**

#### **1. 概念**

- 返回右表的**所有行**，左表中匹配的行返回数据，不匹配的行用 NULL 填充。

#### **2. 语法**

```
SELECT 列名
FROM 表1 RIGHT [OUTER] JOIN 表2 
ON 表1.关联字段 = 表2.关联字段;
```

#### **3. 示例**

**查询**：获取所有成绩记录及其对应的学生（无学生的成绩记录学生名为 NULL）。

```
SELECT s.name, sc.score
FROM students s
RIGHT JOIN scores sc 
ON s.id = sc.student_id;
```

### **六、关键对比**

| 连接类型 | 结果集特点                  | 适用场景                       |
| -------- | --------------------------- | ------------------------------ |
| 内连接   | 仅返回匹配行（交集）        | 需筛选有关联数据的场景         |
| 左外连接 | 左表全量数据 + 右表匹配数据 | 主表数据优先，需包含无关联数据 |
| 右外连接 | 右表全量数据 + 左表匹配数据 | 从表数据优先，需包含无关联数据 |

### **七、注意事项**

1. **关联字段**：确保连接条件（ON 子句）正确，避免笛卡尔积（全组合）。

2. **NULL 值**：外连接中无匹配数据的字段值为 NULL，可通过 COALESCE 函数处理（如 COALESCE(sc.score, 0)）。

3. **性能优化**：大表连接时建议对关联字段添加索引，提升查询效率。

通过以上笔记，可快速理解不同连接类型的区别与应用场景，根据业务需求选择合适的连接方式。